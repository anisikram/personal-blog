---
import { getCollection } from 'astro:content';
import BlogLayout from '../layouts/BlogLayout.astro';

const allPosts = await getCollection('blog');
allPosts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

---

<BlogLayout title="Blog">
  <div class="container mx-auto px-4 py-8">
    <h1 class="text-4xl font-bold text-center mb-8">Mes articles :</h1>
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {allPosts.map(post => (
        <div class="card bg-base-100 shadow-xl hover:shadow-2xl transition-shadow duration-300">
          <figure><img src={post.data.image} alt={post.data.title} /></figure>
          <div class="card-body">
            <h2 class="card-title">
              <a href={`/blog/${post.slug}`}>{post.data.title}</a>
            </h2>
            <p>{post.data.description}</p>
            <div class="card-actions justify-end mt-4">
				<div class="text-sm text-gray-500 mt-4">
					<span>{post.data.author}</span> &bull; 
					<time datetime={post.data.date.toISOString()}>
						{post.data.date.toLocaleDateString('fr-FR', {
							year: 'numeric',
							month: 'long',
							day: 'numeric',
						})}
					</time>
				</div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </div>
</BlogLayout>
